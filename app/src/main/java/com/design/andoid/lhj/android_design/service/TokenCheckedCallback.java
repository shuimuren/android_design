package com.design.andoid.lhj.android_design.service;import com.orhanobut.logger.Logger;import retrofit2.Call;import retrofit2.Callback;import retrofit2.Response;/** * Created by lhj on 18/5/9 */public abstract class TokenCheckedCallback<T extends BaseResult> implements Callback<T> {    @Override    public void onResponse(Call<T> call, Response<T> response) {        if(NetworkConstant.RESPONSE_CODE == response.code() && response.body() != null){            T result = response.body();            if(NetworkConstant.TOKEN_EXPIRED_CODE == result.statusCode){                //token 失效            }else if(result.statusCode == NetworkConstant.RESPONSE_ERROR_CODE){                //地址错误                postError(result.msg);            }else{                postResult(result);            }        }else{            try {                String errorStr = response.errorBody().toString();                postError(errorStr);            }catch (Exception e){                Logger.e(e.getLocalizedMessage());            }        }    }    @Override    public void onFailure(Call<T> call, Throwable t) {    }    protected abstract void postResult(T result);    protected void postError(String errorMessage){    }}